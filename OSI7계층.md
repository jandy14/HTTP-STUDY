# OSI 7 Layer
ISO에서 만든 OSI

통신에 있어서 표준이 없어 회사 장비마다 호환성이 없었다.

이를 위해 만들어진 것이 OSI 7 Layer.

# TCP/IP
OSI 이전에 만들어진 통신 규약

ISO에서 OSI를 만드는데 시간이 지체되자 미 국방성에서 만든 모델

# OSI vs TCP/IP
- OSI의 5계층과 6계층은 TCP/IP에서는 4계층인 Application으로 묶임(계층으로 나눠지지 않음)
- 실제 통신에서 TCP/IP가 많이 사용됨.
- TCP/IP는 인터넷의 발전과 함께 표준화가 계속 이루어지고 사용되어져 신뢰성이 높음.
- OSI 모델은 표준으로써의 의미가 있음.

# OSI 7 Layer의 구조
각 계층마다 위 계층에서 데이터를 받아 처리를 한 뒤 아래 계층으로 넘긴다.

각 계층을 지날 때마다 데이터 해석을 위해 헤더(header)또는 테일(tail)을 붙인다.

## 응용 계층 (Application)
사용자가 직접 데이터를 받거나 보내게 되는 계층이다.

http, ftp, smtp등이 여기에 속한다.

## 표현 계층 (Presentation)
데이터의 표현방식을 지정해 디코딩, 인코딩을 위해 사용한다.

## 세션 계층 (Session)
논리적인 연결을 담당한다.

## 전송 계층 (Transport)
프로그램과 프로그램(end to end)사이의 데이터 전송을 담당한다.

## 네트워크 계층 (Network)
단말기와 단말기(IP까지의 연결)사이의 데이터 전송을 담당한다. IP가 사용된다.

## 데이터 링크 계층 (Data Link)
한 기기에서 이어진 다른 기기까지의(물리적 연결) 데이터 전송을 담당한다. Mac Adress가 사용된다.

## 물리 계층 (Physical)
물리적으로 데이터 전송을 담당한다. UTP케이블, WIFI, 광섬유 등이 사용된다.

# (HTTPS) 메세지의 여행
TCP/IP에서 실제로 HTTP 메세지가 어떻게 전송되는지 알아보기 위해 예시를 들어보자.

`아래 내용은 작성자의 지식을 기반으로 적혀진 내용입니다. 오류에 대해서는 피드백 바랍니다.`
1. 연결을 마친 클라이언트와 서버. 클라이언트는 서버에게 HTTPS 사이트를 요청하려한다.
1. 클라이언트(브라우저)는 요청 메세지를 만들어 전송하였다.
1. TLS는 이를 받아 세션키로 메세지를 암호화한다.
1. TCP는 이를 받아 포트정보와 오류 감지, 순서 등의 여러 정보를 추가해 IP로 보낸다.
1. IP는 이를 받아 목적지 IP, 출발지 IP 경우에 따라 가상 연결 정보등의 내용을 담아 데이터 링크에 보낸다.
1. 데이터 링크는 복원과 오류 감지 등 몇가지 정보를 추가해 물리 계층으로 보낸다.
1. HTTP 메세지에 수 많은 헤더들이 붙어 스위치로 보내어 진다.
1. 스위치는 이를 받아 복원해 데이터링크로 보낸다.
1. 데이터 링크는 맥주소를 보고는 자신에 연결된 맥이 아님을 확인하고 맥주소를 다시 적어 패킹하고 라우터에 보내기로 한다.
1. 다시 패킹된 HTTP메세지는 스위치에 연결된 케이블을 따라 라우터에 도착한다.
1. 라우터의 데이터 링크에서 맥주소를 확인하고 자신의 것이 맞음을 확인하고 IP계층으로 보낸다.
1. IP계층은 데이터의 목적지 IP를 확인하고, 데이터를 보낼 곳을 정해 데이터 링크에 다시 보낸다.
1. 데이터 링크는 새로운 맥주소를 적어 보낸다.
1. 패킹된 HTTP 메세지를 이 라우터 저 라우터 옮겨 가며 드디어 목적지인 서버에 도착한다.
1. 서버의 데이터 링크에서 맥주소를 확인하고 자신의 것이 맞음을 확인하고 위로 보낸다.
1. IP도 자신의 것이 맞음을 확인하고, IP계층에서 추가한 데이터를 빼고 원래 데이터(TCP에서 만든)로 복원해 위로 보낸다.
1. TCP도 오류 확인, 순서등을 확인하고 포트를 확인하고, 헤더를 제거한 뒤, 프로세스(웹서버)에 데이터를 전달 한다.
1. TLS는 세션키를 통해 암호화되어 있는 데이터를 복호화한다.
1. HTTP 메세지는 추가적인 데이터를 모두 버리고 원래의 모습으로 돌아와 웹서버에 도착했다.
1. 웹서버가 HTTP 메세지를 읽어 주었다.
1. 웹서버는 새로운 HTTP 메세지(response)를 만들어 클라이언트(브라우저)에 보낸다.
1. EOS(End Of Story)
# 참고 자료
OSI 7 계층
http://blog.naver.com/PostView.nhn?blogId=demonicws&logNo=40117378644

OSI & TCP/IP
https://goitgo.tistory.com/25

OSI & TCP/IP
https://m.blog.naver.com/PostView.nhn?blogId=jungsajun04&logNo=220796671737&proxyReferer=https:%2F%2Fwww.google.com%2F